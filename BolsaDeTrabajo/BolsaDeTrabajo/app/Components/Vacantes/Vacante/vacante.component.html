<div class="header">
    <damsa-bar-social></damsa-bar-social>
    <damsa-barra (ClickMenuBoton)="ShowMenu()" [CandidatoId]="CandidatoId" [Oculto]="Oculto"></damsa-barra>
    <damsa-menu-oculto [ShowMenu]="showMenu" [CandidatoId]="CandidatoId"></damsa-menu-oculto>
</div>
<div class="global-container-sitio">
    <div class="row">
        <!--Busqueda.-->

        <div class="col-filters">

            <div class="col-12">
                <div class="color-grey float-left">MI CV</div>
                <div class="float-right link-blue">Editar CV</div>

                <div class="clearfix"></div>

                <div class="info-part1">
                    <div class="filters-graph float-left"><img src="assets/images/graphic-test.png" width="100" /></div>
                    <div class="color-grey text-graphic float-right">¡Te falta muy poco para tener tu perfil completo!</div>
                </div>

                <div class="clearfix"></div>
            </div>


            <div class="col-100 col-lg-12 col-sm-6">
                <div class="top-filters color-white"><img src="assets/images/icon-search.png" width="25" /> Definir búsqueda </div>

                <div class="search-filters" [formGroup]="FiltroVacantes" (ngSubmit)="Save()">
                    <input class="input-search" placeholder="Palabra Clave" type="text" formControlName="palabraClave" />
                    <div class="btn-search" style="cursor:pointer;" (click)="buscavacantes()">Buscar</div>
                </div>
            </div>

            <!--<div class="col-100 col-lg-12 col-sm-6">
                <div class="filter-category"><img src="assets/images/icon-location.png" /> Zona </div>

                <div class="search-filters">
                    <input class="input-search" placeholder="Código Postal" />
                    <div class="btn-search">Buscar</div>
                </div>
            </div>-->

            <div class="clearfix delete-991"></div>

            <div class="col-100 col-lg-12 col-md-4 col-sm-6">
                <div class="filter-category"><img src="assets/images/icon-location.png" /> Estado </div>

                <div class="filter-content scrollbar">
                    <ul *ngFor="let estado of estados">
                        <li>
                            <input type="checkbox" (change)="OnClickEstados($event)" Name="estados" id="{{estado.id}}" />{{estado.estado}}
                        </li>
                    </ul>
                </div>

                <div class="clearfix"></div>
            </div>
            <div class="col-100 col-lg-12 col-md-4 col-sm-6">
                <div class="filter-category"><img src="assets/images/icon-location.png" /> Ciudad </div>

                <div class="filter-content scrollbar">
                    <ul *ngFor="let ciudad of municipios">
                        <li>
                            <input type="checkbox" (change)="OnClickMunicipios($event)" Name="municipios" id="{{ciudad.id}}" />{{ciudad.municipio}}
                        </li>
                    </ul>
                </div>

                <div class="clearfix"></div>
            </div>
            <div class="col-100 col-lg-12 col-md-4 col-sm-6">
                <div class="filter-category"><img src="assets/images/icon-education.png" /> Escolaridad </div>

                <div class="filter-content scrollbar">
                    <ul *ngFor="let escolaridad of escolaridades">
                        <li>
                            <input type="checkbox" (change)="OnClickEscolaridades($event)" Name="escolaridades" id="{{escolaridad.id}}" />{{escolaridad.gradoEstudio}}
                        </li>
                    </ul>
                </div>

                <div class="clearfix"></div>
            </div>

            <!--<div class="col-100 col-lg-12 col-md-4 col-sm-6">
                <div class="filter-category"><img src="assets/images/icon-type.png" /> Tipo de jornada </div>

                <div class="filter-content scrollbar">
                    <ul>
                        <li>Opcion</li>
                    </ul>
                </div>

                <div class="clearfix"></div>
            </div>-->

            <div class="col-100 col-lg-12 col-md-4 col-sm-6">
                <div class="filter-category"><img src="assets/images/icon-money.png" /> Salario </div>

                <div class="filter-content scrollbar">
                    <div class="container" style="margin-top:10%">
                        <p style="text-align:center">[+] de: {{rangeValues[0]*100 | currency:'MXN':true:'2.2-4'}}</p>
                        <p style="text-align:center">[-] de: {{rangeValues[1]*100 | currency:'MXN':true:'2.2-4'}}</p>
                        <p-slider [(ngModel)]="rangeValues" (onSlideEnd)="filtrosueldo($event)" [range]="true"></p-slider>
                    </div>
                </div>

                <div class="clearfix"></div>
            </div>

            <div class="col-100 col-lg-12 col-md-4 col-sm-6">
                <div class="filter-category"><img src="assets/images/icon-category.png" /> Categoría </div>

                <div class="filter-content scrollbar">
                    <ul *ngFor="let categoria of categorias">
                        <li>
                            <input type="checkbox" (change)="OnClickCategorias($event)" Name="categoria" id="{{categoria.id}}" />{{categoria.nombre}}
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Fin de busqueda.-->
        <!--<app-busqueda [CandidatoId]="CandidatoId"></app-busqueda>-->
        <div class="col-md-8">
            <div class="col-results">
                <div class="color-grey">34 resultados </div>
                <!-- Resumen de las vacantes encontradas -->
                <div *ngFor="let vacante of vacantes" class="filter-result">
                    <div class="job-name">
                        <img src="assets/images/icon-arrow.png" /> <span>{{vacante.vBtra}}</span>
                    </div>

                    <div class="job-description font-bold">
                        <!--<strong>Escolaridad: </strong>{{vacante.escolaridadesRequi[0].escolaridad.gradoEstudio}}<strong> Nivel: </strong>{{vacante.escolaridadesRequi[0].estadoEstudio.estadoEstudio}} <br />-->
                        <strong>Experiencia: </strong>{{vacante.experiencia}}
                    </div>

                    <div class="job-date col-md-2">{{vacante.fechaAprobacion | date: "MMMM"}}   {{vacante.fechaAprobacion | date: "dd"}} /{{ vacante.fechaAprobacion | date: "yyyy"}}</div>
                    <div class="job-location col-md-2"><img src="assets/images/icon-location.png" />{{vacante.municipio}}, {{vacante.estado}}</div>
                    <div class="job-category col-md-5"><img src="assets/images/icon-category.png" />{{vacante.categoria}}</div>
                    <div class="job-details col-md-3" type="button" style="cursor:pointer;" (click)="showdialog(vacante.id)"> Ver +</div>

                </div>
                <!-- Barra de navegación. -->
                <p-paginator rows="10"
                             [totalRecords]="TotalRecords"
                             [rowsPerPageOptions]="[10,20,30]"
                             (onPageChange)="paginate($event)">
                </p-paginator><br />

                <!-- Texto de crear perfil y notificación de correo -->
                <div *ngIf="user == null" class="be-notificated text-center">
                    <div class="title color-grey">¿Te notificamos a tu correo?</div>
                    <div class="subtitle color-blue">Crea tu perfil y recibe las más recientes vacantes a tu email</div>

                    <div class="btn-yellow text-uppercase color-white">Crea tu perfil</div>
                </div>

                <!--Muestra detalle de la vacante -->
                <p-dialog header="Detalle de la vacante" [(visible)]="display" modal="modal" width="900" height="auto" [dismissableMask]="true" [responsive]="true">
                    <div class="clearfix"></div>
                    <div class="job-name">
                        <img src="assets/images/icon-arrow.png" /> <span>{{vacantesdtl?.vBtra}}</span>
                    </div>
                    <div class="job-description font-bold">
                        <div class="color-blue">{{vacantesdtl?.cliente.nombrecomercial}}</div>
                        <br />
                        <p class="color-grey">
                            <b>Lugar de trabajo: </b>{{vacantesdtl?.direccion.municipio.municipio}}, {{vacantesdtl?.direccion.estado.estado}}<br>
                            <b>Publicado: </b>{{vacantesdtl?.fechaAprobacion| date:'ddMMMM'}}<br>
                            <b>Salario: </b>{{vacantesdtl?.sueldoMinimo | currency:'MXN':true:'2.2-4'}}<br>
                            <b>Categoria: </b>{{vacantesdtl?.area.nombre}}<br>
                        </p>
                        <div class="color-blue text-uppercase">requisitos:</div>
                        <ul class="DV">
                            <li *ngFor="let escolaridad of vacantesdtl?.escolaridadesRequi">
                                <b>Escolaridad: </b>
                                <span>{{escolaridad.escolaridad.gradoEstudio}}</span>
                                <b>Nivel: </b>
                                <span>{{escolaridad.estadoEstudio.estadoEstudio}}</span>
                            </li>
                            <li>
                                <b>Aptitudes:</b>
                                <span *ngFor="let aptitud of vacantesdtl?.aptitudesRequi">{{aptitud?.aptitud.aptitud}}</span>
                            </li>
                            <li>
                                <b>Experiencia:</b>
                                <span>{{vacantesdtl?.experiencia}}</span>
                            </li>
                            <li>
                                <b>Genero: </b> Indistinto<br />
                            </li>
                            <li>
                                <b>Estado civil:</b> Indistinto
                            </li>
                        </ul>

                        <div class="color-blue text-uppercase">horarios:</div>
                        <p class="color-grey">
                            {{vacantesdtl?.horario.deDia.diaSemana}}-{{vacantesdtl?.horario.aDia.diaSemana}},
                            {{vacantesdtl?.horario.deHora}}- {{vacantesdtl?.horario.aHora}} <br />
                            {{vacantesdtl?.horario.especificaciones}}
                        </p>

                        <div class="color-blue text-uppercase">principales actividades a desarrollar:</div>
                        <ul class="color-grey">
                            <li *ngFor="let actividad of vacantesdtl?.actividadesRequi">
                                <span>{{actividad.actividades}}</span>
                            </li>
                        </ul>
                        <div class="color-blue text-uppercase">beneficios</div>
                        <ul class="color-grey">
                            <li *ngFor="let beneficio of vacantesdtl?.beneficiosRequi">
                                <b>{{beneficio.tipoBeneficio.tipoBeneficio}}:</b>
                                <span>{{beneficio.observaciones}}</span>
                            </li>
                        </ul>
                        <div class="color-blue text-uppercase">contrato</div>
                        <p class="color-grey">
                            <b>Inicial: Indefinido</b><br>
                            <b>Consecutivo: Indefinido</b>
                        </p>
                        <div class="color-blue text-uppercase">prestaciones</div>
                        <ul class="color-grey">
                            <li *ngFor="let prestacion of vacantesdtl?.prestacionesLey">
                                <span>{{prestacion.prestacionLey}}</span>
                            </li>
                            <li *ngFor="let prestacion of vacantesdtl?.prestacionesClienteRequi">
                                <span>{{prestacion.prestamo}}</span>
                            </li>
                        </ul>
                    </div>
                    <div class="job-date col-md-3 text-center">{{vacantesdtl?.fechaAprobacion | date: "MMMM"}}   {{vacantesdtl?.fechaAprobacion | date: "dd"}} /{{ vacantesdtl?.fechaAprobacion | date: "yyyy"}}</div>
                    <div class="job-location-int col-md-3 text-center"><img src="assets/images/icon-location.png" />{{vacantesdtl?.direccion.municipio.municipio}}, {{vacantesdtl?.direccion.estado.estado}}</div>
                    <div class="job-category-int col-md-5"><img src="assets/images/icon-category.png" />{{vacantesdtl?.area.nombre}}</div>
                    <p-footer>
                        <button class="postularse text-uppercase text-center color-white" type="button" (click)="Postularse(vacantesdtl.id)">Postularme</button>
                    </p-footer>
                </p-dialog>
                <p-dialog [(visible)]="displayPostulacion" [width]="500"  modal="modal" [dismissableMask]="true" [responsive]="true">
                    <p-header>
                       ¡Felicidades!
                    </p-header>
                         Te postulaste <strong>exitosamente</strong> a la vacante de:  <strong>{{vacantesdtl?.vBtra | uppercase}}</strong>.
                    <p-footer>
                        <button type="button" class="btn" style="background-color:#1ca80c; color:white; cursor:pointer;" (click)="OkPostulacion()" label="Ok">OK</button>
                    </p-footer>
                </p-dialog>


            </div>
        </div>
    </div>
</div>

